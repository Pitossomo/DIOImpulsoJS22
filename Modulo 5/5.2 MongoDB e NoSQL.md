# Introdução ao MongoDB e Banco de Dados NoSQL

- Os bancos de dados não relacionais 
- Hoje, existem vários bancos de dados não relacionais
- O MongoDB é um dos (se não o) mais utilizados no mundo

## Introdução
1. Criação do NoSQL e bancos de dados não relacionais
- Timeline
  - 1970 - 
  - 1998 - 1º NoSQL
  - 2009 - Reaparição do termo em uma conferência 
- NoSQL = Not Only SQL (?)
- Os bancos de dados não relacionais 
- Diferenças em relação os BD relacionais
  - Escalabilidade
  - Facilidade de upscale e downsacle
  - Alta performance
  - Schemas flexíveis (em detrimento da deterioração da performance, em caso de um planejamento falho da estrutura)
- Transações
  | BD Relacional | BD Não Relacional     |
  | ------------- | --------------------- |
  | Atomicidade   | Basically Available   |
  | Consistência  | Soft-State            |
  | Isolamento    | Eventually Consistent |
  | Durabilidade  |                       |
-----
## Tipos de bancos de dados NoSQL
2. Tipos BDs NoSQL
- [Ranking DB-Engines](https://db-engines.com/en/ranking)
- Tipos de bancos de dados NoSQL
   - Orientado a documentos (p.ex. MongoDB)
   - Key-value (p.ex. Redis)
   - Orientado a colunas (p.ex. Cassandra)
   - Orientado a grafos (p.ex. Neo4j)
- Orientação a grafos
  - Estrutura composta por vértices ou nós e arestas ou relações
  - Usado em detecção de fraudes, jogos, redes sociais, etc.
  - P.ex. Neo4j
    - http://sandbox.neo4j.com
    - Usa a linguagem Cypher
    - Criação de nós
      ```cypher
      CREATE (:Client {name: "Lula Molusco", age: 30, hobbies: ['Tocar clarinete']})
      ```
    - Criando relações
      ```cypher 
        MATCH (lula:Client {name: "Lula Molusco"}), (patrick: Client {name: "Patrick Estrela"}) CREATE (lula)-[:Bloqueado]->(patrick)
      ```
    - Consultando nós
      MATCH (todos) RETURN todos
- Orientação a colunas/famílias
  - Similar ao SQL, mas as colunas não são obrigatórias criadas para todas as linhas
  - Ideal para matrizes esparsas, em que haveriam muitas células em branco num BD tradicional
  - As colunas são reservadas apenas para as linhas que usam aquela informação
  - Cada célula possui três valores - nome da coluna (key), valor da coluna na linha (value) e timestamp 
  - As consultas devem ser pela Primary Key, ou por outro valor indexado previamente
  - Usual para casos em que o volume de consulta seja muito maior que a de escrita
  - P.ex. Cassandra
- Orientação a chave e valor
  - Bom desempenho em aplicações na nuvem
  - Menor capacidade de busca, apenas pela chave
  - Usos: cache, sessão de usuário, carrinhos de compra, mensageria, fila
  - Similar ao Cassandra, que foi criado a partir de um BD NoSQL Key-Value
  - Não há pré-definição de Schema 
  - P.ex. Redis
    - Alto desempenho
    - Estrutura de dados na memória
    - Versatilidade
    - Replicação e persistência
    - http://try.redis.io
    - Usado pelo Twitter, Linkedin, p.ex.
------
3. Bancos de Dados orientados a Documentos
- Dados e documentos autocontidos e auto descritivos
- Permite redundância e inconsistência
- Livre de schemas, podendo usar JSON, XML, etc.
- Exemplo: MongoDB (será aprofundado a seguir)
-----
4. Introdução ao MongoDB
- Características
  - Código aberto
  - Alta performance
  - Schema-free
  - Usa o JSON / BSON 
  - Suporte a índices 
  - Auto-sharding: Escalamento horizontal
  - Map-Reduce
  - GridFS
  - Rica linguagem de consulta
- Conceitos
  - Documento ==> Tupla/Registro
  - Collections ==> Tabela
  - Embedding/linking ==> Join (Não é o uso ideal)
- Quando usar:
  - Grande volumes de dados não necessariamente estruturados
  - Não necessita de scripts prévios para criar os schemas
  - Entidades com atributos desconhecidos previamente ou muito variáveis 
- Quando não usar:
  - Necessidade de relacionamentos/joins
  - Propriedades ACID e transações sejam importantes
  - Diversas entidades de pagamentos não homologam sistemas cujos dados financeiros não estejam em bancos de dados relacionais tradicionais
- MongoDB Cloud
  - http://mongodb.com/try  
----- 
5. Schema Design
  

